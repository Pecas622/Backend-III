components:
  schemas:
    User:
      type: object
      required:
        - email
        - password
      properties:
        name:
          description: Nombre del usuario
          type: string
        date:
          description: Fecha de nacimiento del usuario
          type: string
          format: date
        email:
          description: Correo electrónico del usuario
          type: string
          format: email
        password:
          description: Contraseña para iniciar sesión del usuario
          type: string
        avatar:
          description: URL de la foto de perfil del usuario
          type: string
        role:
          description: Rol del usuario en la plataforma
          type: string
          enum: [USER, ADMIN, PREM]
      example:
        name: Santiago
        date: 1998-12-01
        email: santiago@pecas.com
        password: claveSegura123
        avatar: https://cdn-icons-png.flaticon.com/512/147/147142.png
        role: ADMIN

  responses:
    error400:
      description: Solicitud mal formada o con datos inválidos.
      content:
        application/json:
          schema:
            type: object
            properties:
              method:
                type: string
              url:
                type: string
              error:
                type: string
            example:
              method: post
              url: /api/auth/login
              error: Invalid data
    error401:
      description: Credenciales inválidas.
      content:
        application/json:
          schema:
            type: object
            properties:
              method:
                type: string
              url:
                type: string
              error:
                type: string
            example:
              method: post
              url: /api/auth/login
              error: Invalid credentials
    error403:
      description: El acceso está prohibido para este recurso.
      content:
        application/json:
          schema:
            type: object
            properties:
              method:
                type: string
              url:
                type: string
              error:
                type: string
            example:
              method: post
              url: /api/auth/me
              error: Forbidden
    error500:
      description: Error interno del servidor.
      content:
        application/json:
          schema:
            type: object
            properties:
              method:
                type: string
              url:
                type: string
              error:
                type: string
            example:
              method: post
              url: /api/auth/me
              error: Fatal error

paths:
  /api/auth/login:
    post:
      summary: Iniciar sesión de un usuario y guardar el token en una cookie.
      tags:
        - Auth
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - password
              properties:
                email:
                  type: string
                  format: email
                  description: Correo electrónico del usuario
                password:
                  type: string
                  description: Contraseña del usuario
              example:
                email: santiago@pecas.com
                password: claveSegura123
      responses:
        200:
          description: Inicio de sesión exitoso.
          content:
            application/json:
              schema:
                type: object
                properties:
                  method:
                    type: string
                  url:
                    type: string
                  response:
                    type: string
                example:
                  method: post
                  url: /api/auth/login
                  response: Logged in
        400:
          $ref: '#/components/responses/error400'
        401:
          $ref: '#/components/responses/error401'
        500:
          $ref: '#/components/responses/error500'
